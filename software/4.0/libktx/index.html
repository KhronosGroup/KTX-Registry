<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libktx - The KTX Library: Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ktx_logo_200.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libktx - The KTX Library
   &#160;<span id="projectnumber">4.0.0</span>
   </div>
   <div id="projectbrief">Libraries and tools to create and read KTX image texture files.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="mainpage"></a></p>
<p>libktx is a small library of functions for creating and reading KTX (Khronos TeXture) files, version 1 and 2 and instantiating OpenGL&reg; and OpenGL&reg; ES textures and Vulkan images from them. KTX version 2 files can contain images supercompressed with ZStd. They can also contain images in the Basis Universal formats. libktx can deflate and inflate ZStd compressed images and can encode and transcode the Basis Universal formats.</p>
<p>For information about the KTX format see the <a href="http://github.khronos.org/KTX-Specification/">formal specification.</a></p>
<p>The library is open source software. Source code is available at <a href="https://github.com/KhronosGroup/KTX">GitHub</a>. Most of the source code and the documentation is licensed under the Apache 2.0 license. See <a class="el" href="license.html">LICENSE file for the KhronosGroup/KTX-Software project</a> for details. When distributing the library, whether in source or binary form, this documentation must be included in the distribution or otherwise made available to recipients.</p>
<p>See <a class="el" href="libktx_history.html">Revision History</a> for the list of changes.</p>
<dl class="section author"><dt>Authors</dt><dd>Mark Callow, <a href="http://www.edgewise-consulting.com">Edgewise Consulting</a>, formerly at <a href="http://www.hicorp.co.jp">HI Corporation</a><br  />
Andreas Atteneder, Independent.<br  />
Georg Kolling, <a href="http://www.imgtec.com">Imagination Technology</a><br  />
Jacob Str&ouml;m, <a href="http://www.ericsson.com">Ericsson AB</a></dd></dl>
<p><dl class="section user"><dt>API Version</dt><dd>v4.0 </dd></dl>
 </p><dl class="section rcs"><dt>Date</dt><dd>Thu Oct 22 15:48:58 2020 -0400 </dd></dl>
<h1><a class="anchor" id="overview"></a>
Usage Overview</h1>
<p>The following <code><a class="el" href="structktxTexture.html" title="Base class representing a texture.">ktxTexture</a></code> examples work for both KTX and KTX2 textures. The texture type is determined from the file contents.</p>
<h2><a class="anchor" id="readktx"></a>
Reading a KTX file for non-GL and non-Vulkan Use</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="ktx_8h.html">ktx.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="structktxTexture.html">ktxTexture</a>* texture;</div>
<div class="line"><a class="code" href="ktx_8h.html#ad2efa40e38ebae48371375db92d34eaa">KTX_error_code</a> result;</div>
<div class="line">ktx_size_t offset;</div>
<div class="line">ktx_uint8_t* image;</div>
<div class="line">ktx_uint32_t level, layer, faceSlice;</div>
<div class="line"> </div>
<div class="line">result = <a class="code" href="group__reader.html#ga57a1ce0d3f2d66439463160d6ce9d2d0">ktxTexture_CreateFromNamedFile</a>(<span class="stringliteral">&quot;mytex3d.ktx&quot;</span>,</div>
<div class="line">                                        <a class="code" href="ktx_8h.html#a5d741f48293002f70546881d2394b6f6">KTX_TEXTURE_CREATE_LOAD_IMAGE_DATA_BIT</a>,</div>
<div class="line">                                        &amp;texture);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Retrieve information about the texture from fields in the ktxTexture</span></div>
<div class="line"><span class="comment">// such as:</span></div>
<div class="line">ktx_uint32 numLevels = texture-&gt;<a class="code" href="structktxTexture.html#a2b452d1475b8d246839882e26fe3203b">numLevels</a>;</div>
<div class="line">ktx_uint32 baseWidth = texture-&gt;<a class="code" href="structktxTexture.html#ac8470a8c8775a60fe5072e63998aadcb">baseWidth</a>;</div>
<div class="line">ktx_bool_t isArray = texture-&gt;<a class="code" href="structktxTexture.html#ad18302edd81e0368b93d7fdd517813e8">isArray</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Retrieve a pointer to the image for a specific mip level, array layer</span></div>
<div class="line"><span class="comment">// &amp; face or depth slice.</span></div>
<div class="line">level = 1; layer = 0; faceSlice = 3;</div>
<div class="line">result = <a class="code" href="ktx_8h.html#ad624834c6bbff1de5059c8507c73a397">ktxTexture_GetImageOffset</a>(texture, level, layer, faceSlice, &amp;offset);</div>
<div class="line">image = <a class="code" href="group__reader.html#gace44d98fa78b94c282016e7cf8a88b7e">ktxTexture_GetData</a>(texture) + offset;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><span class="comment">// Do something with the texture image.</span></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="ktx_8h.html#a0becd37ccf729eed8723b969bb93df3d">ktxTexture_Destroy</a>(texture);</div>
<div class="ttc" id="agroup__reader_html_ga57a1ce0d3f2d66439463160d6ce9d2d0"><div class="ttname"><a href="group__reader.html#ga57a1ce0d3f2d66439463160d6ce9d2d0">ktxTexture::ktxTexture_CreateFromNamedFile</a></div><div class="ttdeci">KTX_error_code ktxTexture_CreateFromNamedFile(const char *const filename, ktxTextureCreateFlags createFlags, ktxTexture **newTex)</div><div class="ttdoc">Create a ktxTexture1 or ktxTexture2 from a named KTX file according to the file contents.</div><div class="ttdef"><b>Definition:</b> texture.c:412</div></div>
<div class="ttc" id="agroup__reader_html_gace44d98fa78b94c282016e7cf8a88b7e"><div class="ttname"><a href="group__reader.html#gace44d98fa78b94c282016e7cf8a88b7e">ktxTexture::ktxTexture_GetData</a></div><div class="ttdeci">ktx_uint8_t * ktxTexture_GetData(ktxTexture *This)</div><div class="ttdoc">Return a pointer to the texture image data.</div><div class="ttdef"><b>Definition:</b> texture.c:490</div></div>
<div class="ttc" id="aktx_8h_html"><div class="ttname"><a href="ktx_8h.html">ktx.h</a></div><div class="ttdoc">Declares the public functions and structures of the KTX API.</div></div>
<div class="ttc" id="aktx_8h_html_a0becd37ccf729eed8723b969bb93df3d"><div class="ttname"><a href="ktx_8h.html#a0becd37ccf729eed8723b969bb93df3d">ktxTexture_Destroy</a></div><div class="ttdeci">#define ktxTexture_Destroy(This)</div><div class="ttdoc">Helper for calling the Destroy virtual method of a ktxTexture.</div><div class="ttdef"><b>Definition:</b> ktx.h:511</div></div>
<div class="ttc" id="aktx_8h_html_a5d741f48293002f70546881d2394b6f6"><div class="ttname"><a href="ktx_8h.html#a5d741f48293002f70546881d2394b6f6">KTX_TEXTURE_CREATE_LOAD_IMAGE_DATA_BIT</a></div><div class="ttdeci">@ KTX_TEXTURE_CREATE_LOAD_IMAGE_DATA_BIT</div><div class="ttdef"><b>Definition:</b> ktx.h:740</div></div>
<div class="ttc" id="aktx_8h_html_ad2efa40e38ebae48371375db92d34eaa"><div class="ttname"><a href="ktx_8h.html#ad2efa40e38ebae48371375db92d34eaa">KTX_error_code</a></div><div class="ttdeci">#define KTX_error_code</div><div class="ttdoc">For backward compatibility.</div><div class="ttdef"><b>Definition:</b> ktx.h:185</div></div>
<div class="ttc" id="aktx_8h_html_ad624834c6bbff1de5059c8507c73a397"><div class="ttname"><a href="ktx_8h.html#ad624834c6bbff1de5059c8507c73a397">ktxTexture_GetImageOffset</a></div><div class="ttdeci">#define ktxTexture_GetImageOffset(This, faceSlice, layer, level, pOffset)</div><div class="ttdoc">Helper for calling the GetImageOffset virtual method of a ktxTexture.</div><div class="ttdef"><b>Definition:</b> ktx.h:519</div></div>
<div class="ttc" id="astructktxTexture_html"><div class="ttname"><a href="structktxTexture.html">ktxTexture</a></div><div class="ttdoc">Base class representing a texture.</div><div class="ttdef"><b>Definition:</b> ktx.h:272</div></div>
<div class="ttc" id="astructktxTexture_html_a2b452d1475b8d246839882e26fe3203b"><div class="ttname"><a href="structktxTexture.html#a2b452d1475b8d246839882e26fe3203b">ktxTexture::numLevels</a></div><div class="ttdeci">ktx_uint32_t numLevels</div><div class="ttdoc">Number of mip levels in the texture.</div><div class="ttdef"><b>Definition:</b> ktx.h:273</div></div>
<div class="ttc" id="astructktxTexture_html_ac8470a8c8775a60fe5072e63998aadcb"><div class="ttname"><a href="structktxTexture.html#ac8470a8c8775a60fe5072e63998aadcb">ktxTexture::baseWidth</a></div><div class="ttdeci">ktx_uint32_t baseWidth</div><div class="ttdoc">Width of the texture's base level.</div><div class="ttdef"><b>Definition:</b> ktx.h:273</div></div>
<div class="ttc" id="astructktxTexture_html_ad18302edd81e0368b93d7fdd517813e8"><div class="ttname"><a href="structktxTexture.html#ad18302edd81e0368b93d7fdd517813e8">ktxTexture::isArray</a></div><div class="ttdeci">ktx_bool_t isArray</div><div class="ttdef"><b>Definition:</b> ktx.h:273</div></div>
</div><!-- fragment --><h2><a class="anchor" id="createGL"></a>
Creating a GL texture object from a KTX file.</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="ktx_8h.html">ktx.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="structktxTexture.html">ktxTexture</a>* kTexture;</div>
<div class="line"><a class="code" href="ktx_8h.html#ad2efa40e38ebae48371375db92d34eaa">KTX_error_code</a> result;</div>
<div class="line">ktx_size_t offset;</div>
<div class="line">ktx_uint8_t* image;</div>
<div class="line">ktx_uint32_t level, layer, faceSlice;</div>
<div class="line">GLuint texture = 0;</div>
<div class="line">GLenum target, glerror;</div>
<div class="line"> </div>
<div class="line">result = <a class="code" href="group__reader.html#ga57a1ce0d3f2d66439463160d6ce9d2d0">ktxTexture_CreateFromNamedFile</a>(<span class="stringliteral">&quot;mytex3d.ktx&quot;</span>,</div>
<div class="line">                                        KTX_TEXTURE_CREATE_NO_FLAGS,</div>
<div class="line">                                        &amp;kTexture);</div>
<div class="line">glGenTextures(1, &amp;texture); <span class="comment">// Optional. GLUpload can generate a texture.</span></div>
<div class="line">result = <a class="code" href="group__ktx__glloader.html#ga516367e94731f99a23a83fb029e9a441">ktxTexture_GLUpload</a>(kTexture, &amp;texture, &amp;target, &amp;glerror);</div>
<div class="line"><a class="code" href="ktx_8h.html#a0becd37ccf729eed8723b969bb93df3d">ktxTexture_Destroy</a>(texture);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><span class="comment">// GL rendering using the texture</span></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="ttc" id="agroup__ktx__glloader_html_ga516367e94731f99a23a83fb029e9a441"><div class="ttname"><a href="group__ktx__glloader.html#ga516367e94731f99a23a83fb029e9a441">ktxTexture::ktxTexture_GLUpload</a></div><div class="ttdeci">KTX_error_code ktxTexture_GLUpload(ktxTexture *This, GLuint *pTexture, GLenum *pTarget, GLenum *pGlerror)</div><div class="ttdoc">Create a GL texture object from a ktxTexture1 object.</div><div class="ttdef"><b>Definition:</b> glloader.c:1025</div></div>
</div><!-- fragment --><h2><a class="anchor" id="createVulkan"></a>
Creating a Vulkan image object from a KTX file.</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;vulkan/vulkan.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ktxvulkan.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="structktxTexture.html">ktxTexture</a>* kTexture;</div>
<div class="line"><a class="code" href="ktx_8h.html#ad2efa40e38ebae48371375db92d34eaa">KTX_error_code</a> result;</div>
<div class="line">ktx_size_t offset;</div>
<div class="line">ktx_uint8_t* image;</div>
<div class="line">ktx_uint32_t level, layer, faceSlice;</div>
<div class="line"><a class="code" href="structktxVulkanDeviceInfo.html">ktxVulkanDeviceInfo</a> vdi;</div>
<div class="line"><a class="code" href="structktxVulkanTexture.html">ktxVulkanTexture</a> texture;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Set up Vulkan physical device (gpu), logical device (device), queue</span></div>
<div class="line"><span class="comment">// and command pool. Save the handles to these in a struct called vkctx.</span></div>
<div class="line"><span class="comment">// ktx VulkanDeviceInfo is used to pass these with the expectation that</span></div>
<div class="line"><span class="comment">// apps are likely to upload a large number of textures.</span></div>
<div class="line"><a class="code" href="group__ktx__vkloader.html#ga4bc9f0fa9af93d588276f54fe9a6ba50">ktxVulkanDeviceInfo_Construct</a>(&amp;vdi, vkctx.gpu, vkctx.device,</div>
<div class="line">                              vkctx.queue, vkctx.commandPool, <span class="keyword">nullptr</span>);</div>
<div class="line"> </div>
<div class="line">ktxresult = <a class="code" href="group__reader.html#ga57a1ce0d3f2d66439463160d6ce9d2d0">ktxTexture_CreateFromNamedFile</a>(<span class="stringliteral">&quot;mytex3d.ktx&quot;</span>,</div>
<div class="line">                                           KTX_TEXTURE_CREATE_NO_FLAGS,</div>
<div class="line">                                           &amp;kTexture);</div>
<div class="line"> </div>
<div class="line">ktxresult = <a class="code" href="group__ktx__vkloader.html#ga153164adbd7307ad1844c3e117faa325">ktxTexture_VkUploadEx</a>(kTexture, &amp;vdi, &amp;texture,</div>
<div class="line">                                  VK_IMAGE_TILING_OPTIMAL,</div>
<div class="line">                                  VK_IMAGE_USAGE_SAMPLED_BIT,</div>
<div class="line">                                  VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL);</div>
<div class="line"> </div>
<div class="line"><a class="code" href="ktx_8h.html#a0becd37ccf729eed8723b969bb93df3d">ktxTexture_Destroy</a>(kTexture);</div>
<div class="line"><a class="code" href="group__ktx__vkloader.html#gae58928740420d1ed3f96fd4b0f2d897e">ktxVulkanDeviceInfo_Destruct</a>(&amp;vdi);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><span class="comment">// Vulkan rendering using the texture</span></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><span class="comment">// When done using the image in Vulkan...</span></div>
<div class="line"><a class="code" href="group__ktx__vkloader.html#gaf620a84f6bc59bff03b521e55a654f19">ktxVulkanTexture_Destruct</a>(&amp;texture, vkctx.device, <span class="keyword">nullptr</span>);</div>
<div class="ttc" id="agroup__ktx__vkloader_html_ga153164adbd7307ad1844c3e117faa325"><div class="ttname"><a href="group__ktx__vkloader.html#ga153164adbd7307ad1844c3e117faa325">ktxTexture::ktxTexture_VkUploadEx</a></div><div class="ttdeci">KTX_error_code ktxTexture_VkUploadEx(ktxTexture *This, ktxVulkanDeviceInfo *vdi, ktxVulkanTexture *vkTexture, VkImageTiling tiling, VkImageUsageFlags usageFlags, VkImageLayout finalLayout)</div><div class="ttdoc">Create a Vulkan image object from a ktxTexture object.</div><div class="ttdef"><b>Definition:</b> vkloader.c:590</div></div>
<div class="ttc" id="agroup__ktx__vkloader_html_ga4bc9f0fa9af93d588276f54fe9a6ba50"><div class="ttname"><a href="group__ktx__vkloader.html#ga4bc9f0fa9af93d588276f54fe9a6ba50">ktxVulkanDeviceInfo::ktxVulkanDeviceInfo_Construct</a></div><div class="ttdeci">KTX_error_code ktxVulkanDeviceInfo_Construct(ktxVulkanDeviceInfo *This, VkPhysicalDevice physicalDevice, VkDevice device, VkQueue queue, VkCommandPool cmdPool, const VkAllocationCallbacks *pAllocator)</div><div class="ttdoc">Construct a ktxVulkanDeviceInfo object.</div><div class="ttdef"><b>Definition:</b> vkloader.c:143</div></div>
<div class="ttc" id="agroup__ktx__vkloader_html_gae58928740420d1ed3f96fd4b0f2d897e"><div class="ttname"><a href="group__ktx__vkloader.html#gae58928740420d1ed3f96fd4b0f2d897e">ktxVulkanDeviceInfo::ktxVulkanDeviceInfo_Destruct</a></div><div class="ttdeci">void ktxVulkanDeviceInfo_Destruct(ktxVulkanDeviceInfo *This)</div><div class="ttdoc">Destruct a ktxVulkanDeviceInfo object.</div><div class="ttdef"><b>Definition:</b> vkloader.c:192</div></div>
<div class="ttc" id="agroup__ktx__vkloader_html_gaf620a84f6bc59bff03b521e55a654f19"><div class="ttname"><a href="group__ktx__vkloader.html#gaf620a84f6bc59bff03b521e55a654f19">ktxVulkanTexture::ktxVulkanTexture_Destruct</a></div><div class="ttdeci">void ktxVulkanTexture_Destruct(ktxVulkanTexture *vkTexture, VkDevice device, const VkAllocationCallbacks *pAllocator)</div><div class="ttdoc">Destructor for the object returned when loading a texture image.</div><div class="ttdef"><b>Definition:</b> vkloader.c:1548</div></div>
<div class="ttc" id="astructktxVulkanDeviceInfo_html"><div class="ttname"><a href="structktxVulkanDeviceInfo.html">ktxVulkanDeviceInfo</a></div><div class="ttdoc">Struct for passing information about the Vulkan device on which to create images to the texture image...</div><div class="ttdef"><b>Definition:</b> ktxvulkan.h:110</div></div>
<div class="ttc" id="astructktxVulkanTexture_html"><div class="ttname"><a href="structktxVulkanTexture.html">ktxVulkanTexture</a></div><div class="ttdoc">Struct for returning information about the Vulkan texture image created by the ktxTexture_VkUpload* f...</div><div class="ttdef"><b>Definition:</b> ktxvulkan.h:64</div></div>
</div><!-- fragment --><h2><a class="anchor" id="subsection"></a>
Extracting Metadata</h2>
<p>Once a <a class="el" href="structktxTexture.html" title="Base class representing a texture.">ktxTexture</a> object has been created, metadata can be easily found and extracted. The following can be added to any of the above.</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span>* pValue;</div>
<div class="line">uint32_t valueLen;</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="ktx_8h.html#a7780d97ec4de6aa30c4726fb71e3116cafdb7a07b23399df43e1ecf161963cf98">KTX_SUCCESS</a> == <a class="code" href="classktxHashList.html#ab3625f19223436b718d9267f0b9a663a">ktxHashList_FindValue</a>(&amp;kTexture-&gt;<a class="code" href="structktxTexture.html#a3bb33b1858f6faf8bbb8f4660e778138">kvDataHead</a>,</div>
<div class="line">                                          <a class="code" href="ktx_8h.html#a7eebf850576083e740cf1f418eed39a0">KTX_ORIENTATION_KEY</a>,</div>
<div class="line">                                          &amp;valueLen, (<span class="keywordtype">void</span>**)&amp;pValue))</div>
<div class="line"> {</div>
<div class="line">      <span class="keywordtype">char</span> s, t;</div>
<div class="line"> </div>
<div class="line">      <span class="keywordflow">if</span> (sscanf(pValue, <a class="code" href="ktx_8h.html#ad235113b0090e64ad23a0cf7097e1b7a">KTX_ORIENTATION2_FMT</a>, &amp;s, &amp;t) == 2) {</div>
<div class="line">         ...</div>
<div class="line">      }</div>
<div class="line"> }</div>
<div class="ttc" id="aclassktxHashList_html_ab3625f19223436b718d9267f0b9a663a"><div class="ttname"><a href="classktxHashList.html#ab3625f19223436b718d9267f0b9a663a">ktxHashList::ktxHashList_FindValue</a></div><div class="ttdeci">KTX_error_code ktxHashList_FindValue(ktxHashList *pHead, const char *key, unsigned int *pValueLen, void **ppValue)</div><div class="ttdoc">Looks up a key in a hash list and returns the value.</div><div class="ttdef"><b>Definition:</b> hashlist.c:333</div></div>
<div class="ttc" id="aktx_8h_html_a7780d97ec4de6aa30c4726fb71e3116cafdb7a07b23399df43e1ecf161963cf98"><div class="ttname"><a href="ktx_8h.html#a7780d97ec4de6aa30c4726fb71e3116cafdb7a07b23399df43e1ecf161963cf98">KTX_SUCCESS</a></div><div class="ttdeci">@ KTX_SUCCESS</div><div class="ttdef"><b>Definition:</b> ktx.h:159</div></div>
<div class="ttc" id="aktx_8h_html_a7eebf850576083e740cf1f418eed39a0"><div class="ttname"><a href="ktx_8h.html#a7eebf850576083e740cf1f418eed39a0">KTX_ORIENTATION_KEY</a></div><div class="ttdeci">#define KTX_ORIENTATION_KEY</div><div class="ttdoc">Key string for standard orientation metadata.</div><div class="ttdef"><b>Definition:</b> ktx.h:114</div></div>
<div class="ttc" id="aktx_8h_html_ad235113b0090e64ad23a0cf7097e1b7a"><div class="ttname"><a href="ktx_8h.html#ad235113b0090e64ad23a0cf7097e1b7a">KTX_ORIENTATION2_FMT</a></div><div class="ttdeci">#define KTX_ORIENTATION2_FMT</div><div class="ttdoc">Standard KTX 1 format for 2D orientation value.</div><div class="ttdef"><b>Definition:</b> ktx.h:139</div></div>
<div class="ttc" id="astructktxTexture_html_a3bb33b1858f6faf8bbb8f4660e778138"><div class="ttname"><a href="structktxTexture.html#a3bb33b1858f6faf8bbb8f4660e778138">ktxTexture::kvDataHead</a></div><div class="ttdeci">ktxHashList kvDataHead</div><div class="ttdoc">Head of the hash list of metadata.</div><div class="ttdef"><b>Definition:</b> ktx.h:273</div></div>
</div><!-- fragment --><h2><a class="anchor" id="writektx"></a>
Writing a KTX or KTX2 file</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="ktx_8h.html">ktx.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vkformat_enum.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="structktxTexture2.html">ktxTexture2</a>* texture;                   <span class="comment">// For KTX2</span></div>
<div class="line"><span class="comment">//ktxTexture1* texture;                 // For KTX</span></div>
<div class="line"><a class="code" href="structktxTextureCreateInfo.html">ktxTextureCreateInfo</a> createInfo;</div>
<div class="line"><a class="code" href="ktx_8h.html#ad2efa40e38ebae48371375db92d34eaa">KTX_error_code</a> result;</div>
<div class="line">ktx_uint32_t level, layer, faceSlice;</div>
<div class="line">FILE* src;</div>
<div class="line">ktx_size_t srcSize;</div>
<div class="line"> </div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#a6d1bde0fd4b46618d1f15aa519e08c6b">glInternalformat</a> = GL_RGB8;   <span class="comment">// Ignored if creating a ktxTexture2.</span></div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#aa1bc25cfcfdc8c0753a265753312ef65">vkFormat</a> = VK_FORMAT_R8G8B8_UNORM;   <span class="comment">// Ignored if creating a ktxTexture1.</span></div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#ae817666a8c8ef8fbed5d81b52c421b9e">baseWidth</a> = 2048;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#af401308b301717196a51015aac339e90">baseHeight</a> = 1024;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#acd631299f24ac52bc6af9d9303251a0e">baseDepth</a> = 16;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#aee982947789840643580ef13d9209124">numDimensions</a> = 3.</div>
<div class="line"><span class="comment">// Note: it is not necessary to provide a full mipmap pyramid.</span></div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#a5bc01f6ce3a1082921cc307d80b4662c">numLevels</a> = log2(createInfo.<a class="code" href="structktxTextureCreateInfo.html#ae817666a8c8ef8fbed5d81b52c421b9e">baseWidth</a>) + 1</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#a237cfa756c1b49169d769442c1c5492a">numLayers</a> = 1;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#ad0f09614599bd18f0430d2e3e3f2acf1">numFaces</a> = 1;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#a7f6d6379fcb54b95769000b3919a659b">isArray</a> = KTX_FALSE;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#ae77eda256cb25882c635ca7515811f0e">generateMipmaps</a> = KTX_FALSE;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Call ktxTexture1_Create to create a KTX texture.</span></div>
<div class="line">result = <a class="code" href="group__writer.html#ga9ff411caf2251c100a581960deaf9bb7">ktxTexture2_Create</a>(&amp;createInfo,</div>
<div class="line">                            <a class="code" href="ktx_8h.html#a2ab4b656d36abc318aed17a5f73c505c">KTX_TEXTURE_CREATE_ALLOC_STORAGE</a>,</div>
<div class="line">                            &amp;texture);</div>
<div class="line"> </div>
<div class="line">src = <span class="comment">// Open a stdio FILE* on the baseLevel image, slice 0.</span></div>
<div class="line">srcSize = <span class="comment">// Query size of the file.</span></div>
<div class="line">level = 0;</div>
<div class="line">layer = 0;</div>
<div class="line">faceSlice = 0;                           </div>
<div class="line">result = <a class="code" href="ktx_8h.html#a11077712b020a97507c1e22a4c9c45b6">ktxTexture_SetImageFromMemory</a>(<a class="code" href="structktxTexture.html">ktxTexture</a>(texture),</div>
<div class="line">                                       level, layer, faceSlice,</div>
<div class="line">                                       src, srcSize);</div>
<div class="line"><span class="comment">// Repeat for the other 15 slices of the base level and all other levels</span></div>
<div class="line"><span class="comment">// up to createInfo.numLevels.</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="ktx_8h.html#a5a338703d7be18ef6cc97a83d5fad8fe">ktxTexture_WriteToNamedFile</a>(<a class="code" href="structktxTexture.html">ktxTexture</a>(texture), <span class="stringliteral">&quot;mytex3d.ktx&quot;</span>);</div>
<div class="line"><a class="code" href="ktx_8h.html#a0becd37ccf729eed8723b969bb93df3d">ktxTexture_Destroy</a>(<a class="code" href="structktxTexture.html">ktxTexture</a>(texture));</div>
<div class="ttc" id="agroup__writer_html_ga9ff411caf2251c100a581960deaf9bb7"><div class="ttname"><a href="group__writer.html#ga9ff411caf2251c100a581960deaf9bb7">ktxTexture2::ktxTexture2_Create</a></div><div class="ttdeci">KTX_error_code ktxTexture2_Create(ktxTextureCreateInfo *createInfo, ktxTextureCreateStorageEnum storageAllocation, ktxTexture2 **newTex)</div><div class="ttdoc">Create a new empty ktxTexture2.</div><div class="ttdef"><b>Definition:</b> texture2.c:1066</div></div>
<div class="ttc" id="aktx_8h_html_a11077712b020a97507c1e22a4c9c45b6"><div class="ttname"><a href="ktx_8h.html#a11077712b020a97507c1e22a4c9c45b6">ktxTexture_SetImageFromMemory</a></div><div class="ttdeci">#define ktxTexture_SetImageFromMemory(This, level, layer, faceSlice, src, srcSize)</div><div class="ttdoc">Helper for calling the SetImageFromMemory virtual method of a ktxTexture.</div><div class="ttdef"><b>Definition:</b> ktx.h:579</div></div>
<div class="ttc" id="aktx_8h_html_a2ab4b656d36abc318aed17a5f73c505c"><div class="ttname"><a href="ktx_8h.html#a2ab4b656d36abc318aed17a5f73c505c">KTX_TEXTURE_CREATE_ALLOC_STORAGE</a></div><div class="ttdeci">@ KTX_TEXTURE_CREATE_ALLOC_STORAGE</div><div class="ttdef"><b>Definition:</b> ktx.h:728</div></div>
<div class="ttc" id="aktx_8h_html_a5a338703d7be18ef6cc97a83d5fad8fe"><div class="ttname"><a href="ktx_8h.html#a5a338703d7be18ef6cc97a83d5fad8fe">ktxTexture_WriteToNamedFile</a></div><div class="ttdeci">#define ktxTexture_WriteToNamedFile(This, dstname)</div><div class="ttdoc">Helper for calling the WriteToNamedfile virtual method of a ktxTexture.</div><div class="ttdef"><b>Definition:</b> ktx.h:609</div></div>
<div class="ttc" id="astructktxTexture2_html"><div class="ttname"><a href="structktxTexture2.html">ktxTexture2</a></div><div class="ttdoc">Class representing a KTX version 2 format texture.</div><div class="ttdef"><b>Definition:</b> ktx.h:671</div></div>
<div class="ttc" id="astructktxTextureCreateInfo_html"><div class="ttname"><a href="structktxTextureCreateInfo.html">ktxTextureCreateInfo</a></div><div class="ttdoc">Structure for passing texture information to ktxTexture[12]_Create().</div><div class="ttdef"><b>Definition:</b> ktx.h:693</div></div>
<div class="ttc" id="astructktxTextureCreateInfo_html_a237cfa756c1b49169d769442c1c5492a"><div class="ttname"><a href="structktxTextureCreateInfo.html#a237cfa756c1b49169d769442c1c5492a">ktxTextureCreateInfo::numLayers</a></div><div class="ttdeci">ktx_uint32_t numLayers</div><div class="ttdef"><b>Definition:</b> ktx.h:709</div></div>
<div class="ttc" id="astructktxTextureCreateInfo_html_a5bc01f6ce3a1082921cc307d80b4662c"><div class="ttname"><a href="structktxTextureCreateInfo.html#a5bc01f6ce3a1082921cc307d80b4662c">ktxTextureCreateInfo::numLevels</a></div><div class="ttdeci">ktx_uint32_t numLevels</div><div class="ttdef"><b>Definition:</b> ktx.h:707</div></div>
<div class="ttc" id="astructktxTextureCreateInfo_html_a6d1bde0fd4b46618d1f15aa519e08c6b"><div class="ttname"><a href="structktxTextureCreateInfo.html#a6d1bde0fd4b46618d1f15aa519e08c6b">ktxTextureCreateInfo::glInternalformat</a></div><div class="ttdeci">ktx_uint32_t glInternalformat</div><div class="ttdef"><b>Definition:</b> ktx.h:694</div></div>
<div class="ttc" id="astructktxTextureCreateInfo_html_a7f6d6379fcb54b95769000b3919a659b"><div class="ttname"><a href="structktxTextureCreateInfo.html#a7f6d6379fcb54b95769000b3919a659b">ktxTextureCreateInfo::isArray</a></div><div class="ttdeci">ktx_bool_t isArray</div><div class="ttdef"><b>Definition:</b> ktx.h:711</div></div>
<div class="ttc" id="astructktxTextureCreateInfo_html_aa1bc25cfcfdc8c0753a265753312ef65"><div class="ttname"><a href="structktxTextureCreateInfo.html#aa1bc25cfcfdc8c0753a265753312ef65">ktxTextureCreateInfo::vkFormat</a></div><div class="ttdeci">ktx_uint32_t vkFormat</div><div class="ttdef"><b>Definition:</b> ktx.h:697</div></div>
<div class="ttc" id="astructktxTextureCreateInfo_html_acd631299f24ac52bc6af9d9303251a0e"><div class="ttname"><a href="structktxTextureCreateInfo.html#acd631299f24ac52bc6af9d9303251a0e">ktxTextureCreateInfo::baseDepth</a></div><div class="ttdeci">ktx_uint32_t baseDepth</div><div class="ttdef"><b>Definition:</b> ktx.h:704</div></div>
<div class="ttc" id="astructktxTextureCreateInfo_html_ad0f09614599bd18f0430d2e3e3f2acf1"><div class="ttname"><a href="structktxTextureCreateInfo.html#ad0f09614599bd18f0430d2e3e3f2acf1">ktxTextureCreateInfo::numFaces</a></div><div class="ttdeci">ktx_uint32_t numFaces</div><div class="ttdef"><b>Definition:</b> ktx.h:710</div></div>
<div class="ttc" id="astructktxTextureCreateInfo_html_ae77eda256cb25882c635ca7515811f0e"><div class="ttname"><a href="structktxTextureCreateInfo.html#ae77eda256cb25882c635ca7515811f0e">ktxTextureCreateInfo::generateMipmaps</a></div><div class="ttdeci">ktx_bool_t generateMipmaps</div><div class="ttdef"><b>Definition:</b> ktx.h:714</div></div>
<div class="ttc" id="astructktxTextureCreateInfo_html_ae817666a8c8ef8fbed5d81b52c421b9e"><div class="ttname"><a href="structktxTextureCreateInfo.html#ae817666a8c8ef8fbed5d81b52c421b9e">ktxTextureCreateInfo::baseWidth</a></div><div class="ttdeci">ktx_uint32_t baseWidth</div><div class="ttdef"><b>Definition:</b> ktx.h:702</div></div>
<div class="ttc" id="astructktxTextureCreateInfo_html_aee982947789840643580ef13d9209124"><div class="ttname"><a href="structktxTextureCreateInfo.html#aee982947789840643580ef13d9209124">ktxTextureCreateInfo::numDimensions</a></div><div class="ttdeci">ktx_uint32_t numDimensions</div><div class="ttdef"><b>Definition:</b> ktx.h:705</div></div>
<div class="ttc" id="astructktxTextureCreateInfo_html_af401308b301717196a51015aac339e90"><div class="ttname"><a href="structktxTextureCreateInfo.html#af401308b301717196a51015aac339e90">ktxTextureCreateInfo::baseHeight</a></div><div class="ttdeci">ktx_uint32_t baseHeight</div><div class="ttdef"><b>Definition:</b> ktx.h:703</div></div>
</div><!-- fragment --><h2><a class="anchor" id="modifyktx"></a>
Modifying a KTX file</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="ktx_8h.html">ktx.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="structktxTexture.html">ktxTexture</a>* texture;</div>
<div class="line"><a class="code" href="ktx_8h.html#ad2efa40e38ebae48371375db92d34eaa">KTX_error_code</a> result;</div>
<div class="line">ktx_size_t offset;</div>
<div class="line">ktx_uint8_t* image;</div>
<div class="line">ktx_uint32_t level, layer, faceSlice;</div>
<div class="line"> </div>
<div class="line">result = <a class="code" href="group__reader.html#ga57a1ce0d3f2d66439463160d6ce9d2d0">ktxTexture_CreateFromNamedFile</a>(<span class="stringliteral">&quot;mytex3d.ktx&quot;</span>,</div>
<div class="line">                                        <a class="code" href="ktx_8h.html#a5d741f48293002f70546881d2394b6f6">KTX_TEXTURE_CREATE_LOAD_IMAGE_DATA_BIT</a>,</div>
<div class="line">                                        &amp;texture);</div>
<div class="line"><span class="comment">// The file is closed after all the data has been read.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// It is the responsibilty of the application to make sure its</span></div>
<div class="line"><span class="comment">// modifications are valid.</span></div>
<div class="line">texture-&gt;<a class="code" href="structktxTexture.html#af312c6853bf3e195ba68d3fe75bda05a">generateMipmaps</a> = KTX_TRUE;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="ktx_8h.html#a5a338703d7be18ef6cc97a83d5fad8fe">ktxTexture_WriteToNamedFile</a>(texture, <span class="stringliteral">&quot;mytex3d.ktx&quot;</span>);</div>
<div class="line"><a class="code" href="ktx_8h.html#a0becd37ccf729eed8723b969bb93df3d">ktxTexture_Destroy</a>(texture);</div>
<div class="ttc" id="astructktxTexture_html_af312c6853bf3e195ba68d3fe75bda05a"><div class="ttname"><a href="structktxTexture.html#af312c6853bf3e195ba68d3fe75bda05a">ktxTexture::generateMipmaps</a></div><div class="ttdeci">ktx_bool_t generateMipmaps</div><div class="ttdef"><b>Definition:</b> ktx.h:273</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md0"></a>
Writing a BasisLZ/ETC1S-compressed Texture</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="ktx_8h.html">ktx.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vkformat_enum.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="structktxTexture2.html">ktxTexture2</a>* texture;</div>
<div class="line"><a class="code" href="structktxTextureCreateInfo.html">ktxTextureCreateInfo</a> createInfo;</div>
<div class="line"><a class="code" href="ktx_8h.html#ad2efa40e38ebae48371375db92d34eaa">KTX_error_code</a> result;</div>
<div class="line">ktx_uint32_t level, layer, faceSlice;</div>
<div class="line">FILE* src;</div>
<div class="line">ktx_size_t srcSize;</div>
<div class="line"> </div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#a6d1bde0fd4b46618d1f15aa519e08c6b">glInternalformat</a> = 0;  <span class="comment">//Ignored as we&#39;ll create a KTX2 texture.</span></div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#aa1bc25cfcfdc8c0753a265753312ef65">vkFormat</a> = VK_FORMAT_R8G8B8A8_UNORM;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#ae817666a8c8ef8fbed5d81b52c421b9e">baseWidth</a> = 2048;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#af401308b301717196a51015aac339e90">baseHeight</a> = 1024;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#acd631299f24ac52bc6af9d9303251a0e">baseDepth</a> = 16;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#aee982947789840643580ef13d9209124">numDimensions</a> = 3.</div>
<div class="line"><span class="comment">// Note: it is not necessary to provide a full mipmap pyramid.</span></div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#a5bc01f6ce3a1082921cc307d80b4662c">numLevels</a> = log2(createInfo.<a class="code" href="structktxTextureCreateInfo.html#ae817666a8c8ef8fbed5d81b52c421b9e">baseWidth</a>) + 1</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#a237cfa756c1b49169d769442c1c5492a">numLayers</a> = 1;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#ad0f09614599bd18f0430d2e3e3f2acf1">numFaces</a> = 1;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#a7f6d6379fcb54b95769000b3919a659b">isArray</a> = KTX_FALSE;</div>
<div class="line">createInfo.<a class="code" href="structktxTextureCreateInfo.html#ae77eda256cb25882c635ca7515811f0e">generateMipmaps</a> = KTX_FALSE;</div>
<div class="line"> </div>
<div class="line">result = <a class="code" href="group__writer.html#ga9ff411caf2251c100a581960deaf9bb7">ktxTexture2_Create</a>(&amp;createInfo,</div>
<div class="line">                            <a class="code" href="ktx_8h.html#a2ab4b656d36abc318aed17a5f73c505c">KTX_TEXTURE_CREATE_ALLOC_STORAGE</a>,</div>
<div class="line">                            &amp;texture);</div>
<div class="line"> </div>
<div class="line">src = <span class="comment">// Open a stdio FILE* on the baseLevel image, slice 0.</span></div>
<div class="line">srcSize = <span class="comment">// Query size of the file.</span></div>
<div class="line">level = 0;</div>
<div class="line">layer = 0;</div>
<div class="line">faceSlice = 0;                           </div>
<div class="line">result = <a class="code" href="ktx_8h.html#a11077712b020a97507c1e22a4c9c45b6">ktxTexture_SetImageFromMemory</a>(<a class="code" href="structktxTexture.html">ktxTexture</a>(texture),</div>
<div class="line">                                       level, layer, faceSlice,</div>
<div class="line">                                       src, srcSize);</div>
<div class="line"><span class="comment">// Repeat for the other 15 slices of the base level and all other levels</span></div>
<div class="line"><span class="comment">// up to createInfo.numLevels.</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> quality = 100;</div>
<div class="line">result = <a class="code" href="group__writer.html#ga405c44d6daf8ddf83dc805810bf4f989">ktxTexture2_CompressBasis</a>(texture, quality);</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__writer.html#ga745cee3857ade59e612c533d6faa8e2a">ktxTexture2_WriteToNamedFile</a>(texture, <span class="stringliteral">&quot;mytex3d.ktx2&quot;</span>);</div>
<div class="line"><a class="code" href="group__reader.html#ga01ec49abe73b77f2f8db99b5d9cf46d9">ktxTexture2_Destroy</a>(texture);</div>
<div class="ttc" id="agroup__reader_html_ga01ec49abe73b77f2f8db99b5d9cf46d9"><div class="ttname"><a href="group__reader.html#ga01ec49abe73b77f2f8db99b5d9cf46d9">ktxTexture2::ktxTexture2_Destroy</a></div><div class="ttdeci">void ktxTexture2_Destroy(ktxTexture2 *This)</div><div class="ttdoc">Destroy a ktxTexture2 object.</div><div class="ttdef"><b>Definition:</b> texture2.c:1315</div></div>
<div class="ttc" id="agroup__writer_html_ga405c44d6daf8ddf83dc805810bf4f989"><div class="ttname"><a href="group__writer.html#ga405c44d6daf8ddf83dc805810bf4f989">ktxTexture2::ktxTexture2_CompressBasis</a></div><div class="ttdeci">KTX_error_code ktxTexture2_CompressBasis(ktxTexture2 *This, ktx_uint32_t quality)</div><div class="ttdoc">Supercompress a KTX2 texture with uncompressed images.</div><div class="ttdef"><b>Definition:</b> basis_encode.cpp:1057</div></div>
<div class="ttc" id="agroup__writer_html_ga745cee3857ade59e612c533d6faa8e2a"><div class="ttname"><a href="group__writer.html#ga745cee3857ade59e612c533d6faa8e2a">ktxTexture2::ktxTexture2_WriteToNamedFile</a></div><div class="ttdeci">KTX_error_code ktxTexture2_WriteToNamedFile(ktxTexture2 *This, const char *const dstname)</div><div class="ttdoc">Write a ktxTexture object to a named file in KTX format.</div><div class="ttdef"><b>Definition:</b> writer2.c:557</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1"></a>
Transcoding a BasisLZ/ETC1S-compressed Texture</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="ktx_8h.html">ktx.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="structktxTexture2.html">ktxTexture2</a>* texture;</div>
<div class="line"><a class="code" href="ktx_8h.html#ad2efa40e38ebae48371375db92d34eaa">KTX_error_code</a> result;</div>
<div class="line"> </div>
<div class="line">result = <a class="code" href="group__reader.html#ga57a1ce0d3f2d66439463160d6ce9d2d0">ktxTexture_CreateFromNamedFile</a>(<span class="stringliteral">&quot;mytex3d_basis.ktx2&quot;</span>,</div>
<div class="line">                                        KTX_TEXTURE_CREATE_NO_FLAGS,</div>
<div class="line">                                        (<a class="code" href="structktxTexture.html">ktxTexture</a>**)&amp;kTexture);</div>
<div class="line"><span class="comment">// or</span></div>
<div class="line"><span class="comment">//result = ktxTexture2_CreateFromNamedFile(&quot;mytex3d_basis.ktx2&quot;,</span></div>
<div class="line"><span class="comment">//                                         KTX_TEXTURE_CREATE_NO_FLAGS,</span></div>
<div class="line"><span class="comment">//                                         &amp;kTexture);</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__reader.html#gade1ffc5d31c2f9b5f1e861b59e7619ce">ktxTexture2_NeedsTranscoding</a>(texture)) {</div>
<div class="line">    <a class="code" href="ktx_8h.html#a21462c4d7c10f5ed6fe039516a4fa194">ktx_texture_transcode_fmt_e</a> tf;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Using VkGetPhysicalDeviceFeatures or GL_COMPRESSED_TEXTURE_FORMATS or</span></div>
<div class="line">    <span class="comment">// extension queries, determine what compressed texture formats are</span></div>
<div class="line">    <span class="comment">// supported and pick a format. For example</span></div>
<div class="line">    vk::PhysicalDeviceFeatures deviceFeatures;</div>
<div class="line">    vkctx.gpu.getFeatures(&amp;deviceFeatures);</div>
<div class="line">    <span class="keywordflow">if</span> (deviceFeatures.textureCompressionETC2)</div>
<div class="line">        tf = <a class="code" href="ktx_8h.html#a30cc58c576392303d9a5a54b57ef29b5a665baafd3c1d246bf2726342a083a26b">KTX_TTF_ETC2_RGBA</a>;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (deviceFeatures.textureCompressionBC)</div>
<div class="line">        tf = <a class="code" href="ktx_8h.html#a30cc58c576392303d9a5a54b57ef29b5a352f7aeb953d220e0fa4abc025a6f880">KTX_TTF_BC3_RGBA</a>;</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        message &lt;&lt; <span class="stringliteral">&quot;Vulkan implementation does not support any available transcode target.&quot;</span>;</div>
<div class="line">        <span class="keywordflow">throw</span> std::runtime_error(message.str());</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    result = <a class="code" href="group__reader.html#ga90cc33928a2dae962fb94b3fa2f6575d">ktxTexture2_TranscodeBasis</a>(texture, tf, 0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Then use VkUpload or GLUpload to create a texture object on the GPU.</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__reader_html_ga90cc33928a2dae962fb94b3fa2f6575d"><div class="ttname"><a href="group__reader.html#ga90cc33928a2dae962fb94b3fa2f6575d">ktxTexture2::ktxTexture2_TranscodeBasis</a></div><div class="ttdeci">KTX_error_code ktxTexture2_TranscodeBasis(ktxTexture2 *This, ktx_transcode_fmt_e outputFormat, ktx_transcode_flags transcodeFlags)</div><div class="ttdoc">Transcode a KTX2 texture with BasisLZ/ETC1S or UASTC images.</div><div class="ttdef"><b>Definition:</b> basis_transcode.cpp:135</div></div>
<div class="ttc" id="agroup__reader_html_gade1ffc5d31c2f9b5f1e861b59e7619ce"><div class="ttname"><a href="group__reader.html#gade1ffc5d31c2f9b5f1e861b59e7619ce">ktxTexture2::ktxTexture2_NeedsTranscoding</a></div><div class="ttdeci">ktx_bool_t ktxTexture2_NeedsTranscoding(ktxTexture2 *This)</div><div class="ttdoc">Query if the texture is in a transcodable format.</div><div class="ttdef"><b>Definition:</b> texture2.c:1686</div></div>
<div class="ttc" id="aktx_8h_html_a21462c4d7c10f5ed6fe039516a4fa194"><div class="ttname"><a href="ktx_8h.html#a21462c4d7c10f5ed6fe039516a4fa194">ktx_texture_transcode_fmt_e</a></div><div class="ttdeci">#define ktx_texture_transcode_fmt_e</div><div class="ttdef"><b>Definition:</b> ktx.h:1393</div></div>
<div class="ttc" id="aktx_8h_html_a30cc58c576392303d9a5a54b57ef29b5a352f7aeb953d220e0fa4abc025a6f880"><div class="ttname"><a href="ktx_8h.html#a30cc58c576392303d9a5a54b57ef29b5a352f7aeb953d220e0fa4abc025a6f880">KTX_TTF_BC3_RGBA</a></div><div class="ttdeci">@ KTX_TTF_BC3_RGBA</div><div class="ttdef"><b>Definition:</b> ktx.h:1142</div></div>
<div class="ttc" id="aktx_8h_html_a30cc58c576392303d9a5a54b57ef29b5a665baafd3c1d246bf2726342a083a26b"><div class="ttname"><a href="ktx_8h.html#a30cc58c576392303d9a5a54b57ef29b5a665baafd3c1d246bf2726342a083a26b">KTX_TTF_ETC2_RGBA</a></div><div class="ttdeci">@ KTX_TTF_ETC2_RGBA</div><div class="ttdef"><b>Definition:</b> ktx.h:1132</div></div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Apr 5 2021 12:01:10 for libktx - The KTX Library by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
